language: node_js
node_js:
- '10'

sudo: true
dist: xenial

branches:
  only:
  - master

before_script:
- export CHROME_BIN=/usr/bin/google-chrome
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start
- sudo apt-get update
- sudo apt-get install -y libappindicator1 fonts-liberation
- wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
- sudo dpkg -i google-chrome*.deb

script:
- ng test --watch false
- ng build --prod

deploy:
  provider: npm
  email: weston.pace@gmail.com
  api_key:
    secure: pVvP43C/cevSBjgHmsQ0v3OGFIOt6GDJLztLhYGp0wfYQSrSDNhLhz5RkIKTubgIvF/GPtLI7ye30oEeuDNYwZ6Nx3+2kQErbg2WOit+boXEQk0qVauf4oo5WTCt2/HErH16AV0YdDAQiZrAZWjvX5tmCTB6zRcUfx5nG/mbEDEVHl9LupLEmySMF7j+0FVNf+x5TCxQ8VHQnCTc9Bv9ubM76oWwAnxfbY8J+zwAy8BaDQh1Oc86g1TKvMnZjEUU7vCu/UoI97rW5/0fb3OhH88f8VbgwfthRx7FASGtRs4vcMKI1k/cP+bSwMND8Ds40gedlT2EZvfHw03WNjKY/mZJU3nDp5yeJaMAajD+NB6pDfKwLVD6BmANSwAA1RMgDvDaFUo+DBgjaV47Ks0AabjjHPobK9Py7S3H5gHZA2MumZPvQTkscsVN2E62exTOqVqMB7p2WKZhhPIWRO88ltCVXqagvim+CtWeDNxIl+hCbBwvI/B98sSGTRZFZh8TVQE52HLbCoW+4rUkfvsW1p7+N+uy2Opi3ChW0Igg4cM7/rkFEyh1QEmLZ0t5Y28CHiPPievqaIRDNhHmiTV0gwCys+x4BWZXnf/MGt+uOlGtlsc42azi/29iwVaZGJAhXwEI1Wjr0W9zq6eX0lJOhNuQOQWM34ku7W82jf6O1Co=
  skip_cleanup: true